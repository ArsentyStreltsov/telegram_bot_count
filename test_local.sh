#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะฑะพัะฐ
echo "๐งช ะะพะบะฐะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฑะพัะฐ"

# ะัะพะฒะตััะตะผ, ััะพ ะผั ะฒ ะฟัะฐะฒะธะปัะฝะพะน ะดะธัะตะบัะพัะธะธ
if [ ! -f "main.py" ]; then
    echo "โ ะัะธะฑะบะฐ: main.py ะฝะต ะฝะฐะนะดะตะฝ. ะฃะฑะตะดะธัะตัั, ััะพ ะฒั ะฒ ะบะพัะฝะตะฒะพะน ะฟะฐะฟะบะต ะฟัะพะตะบัะฐ."
    exit 1
fi

# ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต .env ัะฐะนะปะฐ
if [ ! -f ".env" ]; then
    echo "โ ะัะธะฑะบะฐ: .env ัะฐะนะป ะฝะต ะฝะฐะนะดะตะฝ."
    echo "๐ ะกะพะทะดะฐะนัะต .env ัะฐะนะป ั BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ"
    exit 1
fi

# ะัะพะฒะตััะตะผ ะทะฐะฒะธัะธะผะพััะธ
echo "๐ฆ ะัะพะฒะตััะตะผ ะทะฐะฒะธัะธะผะพััะธ..."
if ! python -c "import telegram" 2>/dev/null; then
    echo "โ๏ธ  ะฃััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะทะฐะฒะธัะธะผะพััะธ..."
    pip install -r requirements.txt
fi

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะตะดัะดััะธะน ะฟัะพัะตัั ะฑะพัะฐ, ะตัะปะธ ะพะฝ ะทะฐะฟััะตะฝ
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะตะดัะดััะธะน ะฟัะพัะตัั ะฑะพัะฐ..."
pkill -f "python main.py" 2>/dev/null

# ะะฐะฟััะบะฐะตะผ ะฑะพัะฐ
echo "๐ ะะฐะฟััะบะฐะตะผ ะฑะพัะฐ ะปะพะบะฐะปัะฝะพ..."
echo "๐ฑ ะขะตะฟะตัั ะผะพะถะตัะต ัะตััะธัะพะฒะฐัั ะฑะพัะฐ ะฒ Telegram"
echo "๐ ะะปั ะพััะฐะฝะพะฒะบะธ ะฝะฐะถะผะธัะต Ctrl+C"
echo ""

python main.py
